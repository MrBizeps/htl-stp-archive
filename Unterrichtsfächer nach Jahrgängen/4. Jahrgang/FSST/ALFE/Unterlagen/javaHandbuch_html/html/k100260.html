<html>
<head>
<title>
Handbuch der Java-Programmierung, 7. Auflage
</title>
</head>
<body>
<a name="startofbody"></a>
<script language="JavaScript" src="hjp4lib.js">
</script>
<script language="JavaScript">
installKbdHandler("97,#startofbody;101,#endofbody;116,cover.html;122,k100003.html;115,search.html;105,index.html;100,JDKDOCS;112,APIDOCS;104,k100257.html;106,k100259.html;107,k100261.html;108,k100263.html");
</script>
<table border=0 cellpadding=0 cellspacing=1 width="100%">
<tr bgcolor="#EEFFCC">
<td width="7%" align=center bgcolor="#DDCC99"><a href="cover.html">&nbsp;Titel&nbsp;</a>
<td width="7%" align=center bgcolor="#DDCC99"><a href="k100003.html">&nbsp;Inhalt&nbsp;</a>
<td width="7%" align=center bgcolor="#DDCC99"><a href="search.html">&nbsp;Suchen&nbsp;</a>
<td width="7%" align=center bgcolor="#DDCC99"><a href="index.html">&nbsp;Index&nbsp;</a>
<td width="7%" align=center bgcolor="#DDCC99"><a href="../jdkdocs/index.html" onClick="this.href=getDocIndex()">&nbsp;DOC&nbsp;</a>
<td align="right">Handbuch der Java-Programmierung, 7. Auflage
<tr bgcolor="#EEFFCC">
<td width="7%" align=center bgcolor="#DDCC99"><a href="k100257.html">&nbsp;&lt;&lt;&nbsp;</a>
<td width="7%" align=center bgcolor="#DDCC99"><a href="k100259.html">&nbsp;&nbsp;&lt;&nbsp;&nbsp;</a>
<td width="7%" align=center bgcolor="#DDCC99"><a href="k100261.html">&nbsp;&nbsp;&gt;&nbsp;&nbsp;</a>
<td width="7%" align=center bgcolor="#DDCC99"><a href="k100263.html">&nbsp;&gt;&gt;&nbsp;</a>
<td width="7%" align=center bgcolor="#DDCC99"><a href="../jdkdocs/api/index.html" onClick="this.href=getApiIndex()">&nbsp;API&nbsp;</a>
<td align="right">Kapitel 40 - Applets I
</table>
<hr>


<!-- Section -->
<a name="appletsound"></a>
<h2>40.3 Die <a name="ixa102938">Ausgabe von Sound</a><a name="ixa102939"></a>
</h2>
<hr>
<ul>
<li><a href="k100260.html#appletsound">40.3 Die Ausgabe von Sound</a>
<ul>
<li><a href="k100260.html#sectlevel3id040003001">40.3.1 Soundausgabe in Applets</a>
<li><a href="k100260.html#sectlevel3id040003002">40.3.2 Soundausgabe in Applikationen</a>
</ul>
</ul>
<hr>


<!-- Section -->
<a name="sectlevel3id040003001"></a>
<h3>40.3.1 Soundausgabe in Applets </h3>

<p>
Mit der im JDK enthaltenen Sound-Engine kann Musik wiedergegeben,
aufgenommen und bearbeitet werden und es ist m&ouml;glich, Zusatzger&auml;te
wie Mixer, Synthesizer oder andere Audioger&auml;te anzusteuern. 

<p>
Die Ausgabe von Sound ist denkbar einfach und kann auf zwei unterschiedliche
Arten erfolgen. Zum einen stellt die Klasse <a href="index_a.html#ixb100603"><font color=#000080><tt>Applet</tt></font></a>
die Methode <a name="ixa102940"><a href="index_p.html#ixb102193"><font color=#000080><tt>play</tt></font></a></a>
zur Verf&uuml;gung, mit der eine Sounddatei geladen und abgespielt
werden kann: 
<p>
<table border=0 cellspacing=0 cellpadding=0 width=100% bgcolor="#EEFFCC">
<tr>
<td valign=top width=100%>
<font color="#660066">
<pre>
public void play(URL url)

public void play(URL url, String name)
</pre>
</font>
</td>
<td valign=top>
<a href="../jdkdocs/api/java/applet/Applet.html" onClick="this.href=getApiDoc('java.applet.Applet')"><font color="#660066" size=-1>java.applet.Applet</font></a></td>
</tr>
</table>

<p>
Hierbei kann entweder der <i>URL</i> einer Sounddatei (siehe n&auml;chster
Abschnitt) oder die Kombination von Verzeichnis-URL und Dateinamen
angegeben werden. &Uuml;blicherweise wird zur &Uuml;bergabe des Verzeichnis-URL
eine der <a href="index_a.html#ixb100603"><font color=#000080><tt>Applet</tt></font></a>-Methoden
<a name="ixa102941"><a href="index_g.html#ixb102194"><font color=#000080><tt>getCodeBase</tt></font></a></a>
oder <a name="ixa102942"><a href="index_g.html#ixb102195"><font color=#000080><tt>getDocumentBase</tt></font></a></a>
verwendet. Diese liefern einen URL des Verzeichnisses, aus dem das
Applet gestartet wurde bzw. in dem die aktuelle HTML-Seite liegt:
<p>
<table border=0 cellspacing=0 cellpadding=0 width=100% bgcolor="#EEFFCC">
<tr>
<td valign=top width=100%>
<font color="#660066">
<pre>
public URL getCodeBase()

public URL getDocumentBase()
</pre>
</font>
</td>
<td valign=top>
<a href="../jdkdocs/api/java/applet/Applet.html" onClick="this.href=getApiDoc('java.applet.Applet')"><font color="#660066" size=-1>java.applet.Applet</font></a></td>
</tr>
</table>

<p>
Der Nachteil dieser Vorgehensweise ist, dass die Sounddatei bei jedem
Aufruf neu geladen werden muss. In der zweiten Variante wird zun&auml;chst
durch einen Aufruf von <a name="ixa102943"><a href="index_g.html#ixb102196"><font color=#000080><tt>getAudioClip</tt></font></a></a>
ein Objekt der Klasse <a name="ixa102944"><a href="index_a.html#ixb102197"><font color=#000080><tt>AudioClip</tt></font></a></a>
beschafft, das dann beliebig oft abgespielt werden kann: 
<p>
<table border=0 cellspacing=0 cellpadding=0 width=100% bgcolor="#EEFFCC">
<tr>
<td valign=top width=100%>
<font color="#660066">
<pre>
public AudioClip getAudioClip(URL url, String name)
</pre>
</font>
</td>
<td valign=top>
<a href="../jdkdocs/api/java/applet/Applet.html" onClick="this.href=getApiDoc('java.applet.Applet')"><font color="#660066" size=-1>java.applet.Applet</font></a></td>
</tr>
</table>

<p>
<a href="index_a.html#ixb102197"><font color=#000080><tt>AudioClip</tt></font></a>
stellt die drei Methoden <a name="ixa102940"><a href="index_p.html#ixb102193"><font color=#000080><tt>play</tt></font></a></a>,
<a name="ixa102945"><a href="index_l.html#ixb102198"><font color=#000080><tt>loop</tt></font></a></a>
und <a name="ixa102946"><a href="index_s.html#ixb101118"><font color=#000080><tt>stop</tt></font></a></a>
zur Verf&uuml;gung: 
<p>
<table border=0 cellspacing=0 cellpadding=0 width=100% bgcolor="#EEFFCC">
<tr>
<td valign=top width=100%>
<font color="#660066">
<pre>
public void play()

public void loop()

public void stop()
</pre>
</font>
</td>
<td valign=top>
<a href="../jdkdocs/api/java/applet/AudioClip.html" onClick="this.href=getApiDoc('java.applet.AudioClip')"><font color="#660066" size=-1>java.applet.AudioClip</font></a></td>
</tr>
</table>

<p>
<a href="index_p.html#ixb102193"><font color=#000080><tt>play</tt></font></a>
startet die zuvor geladene Sounddatei und spielt sie genau einmal
ab. <a href="index_l.html#ixb102198"><font color=#000080><tt>loop</tt></font></a>
startet sie ebenfalls, spielt den Sound in einer Endlosschleife aber
immer wieder ab. Durch Aufruf von <a href="index_s.html#ixb101118"><font color=#000080><tt>stop</tt></font></a>
kann diese Schleife beendet werden. Es ist auch m&ouml;glich, mehr
als einen Sound gleichzeitig abzuspielen. So kann beispielsweise eine
Hintergrundmelodie in einer Schleife immer wieder abgespielt werden,
ohne dass die Ausgabe von zus&auml;tzlichen Vordergrund-Sounds beeintr&auml;chtigt
w&uuml;rde. 

<p>
Das folgende Beispiel ist eine neue Variante des &#187;Hello, World&#171;-Programms.
Anstatt der textuellen Ausgabe stellt das Applet zwei Buttons zur
Verf&uuml;gung, mit denen die Worte &#187;Hello&#171; und &#187;World&#171;
abgespielt werden k&ouml;nnen: 
<p>
<a name="imageid040003"></a>
<img src="images/HWApplet.gif">
<p>

<p><i>
Abbildung 40.3: Das sprechende &#187;Hello, World&#171;-Programm</i></p>

<p>
Hier ist der Sourcecode des Programms: 
<a name="hwapplet"></a>

<p>
<table border=0 cellspacing=0 cellpadding=0 width=100% bgcolor="#DDDDDD">
<tr>
<td valign=top>
<font color="#000055">
<pre>
<font color="#555555">001 </font><font color="#00AA00">/* HWApplet.java */</font>
<font color="#555555">002 </font>
<font color="#555555">003 </font><font color="#0000AA">import</font> java.awt.*;
<font color="#555555">004 </font><font color="#0000AA">import</font> java.awt.event.*;
<font color="#555555">005 </font><font color="#0000AA">import</font> java.applet.*;
<font color="#555555">006 </font>
<font color="#555555">007 </font><font color="#0000AA">public</font> <font color="#0000AA">class</font> HWApplet
<font color="#555555">008 </font><font color="#0000AA">extends</font> Applet
<font color="#555555">009 </font><font color="#0000AA">implements</font> ActionListener
<font color="#555555">010 </font>{
<font color="#555555">011 </font>  Button    hello;
<font color="#555555">012 </font>  Button    world;
<font color="#555555">013 </font>  AudioClip helloClip;
<font color="#555555">014 </font>  AudioClip worldClip;
<font color="#555555">015 </font>
<font color="#555555">016 </font>  <font color="#0000AA">public</font> <font color="#006699">void</font> init()
<font color="#555555">017 </font>  {
<font color="#555555">018 </font>    <font color="#006699">super</font>.init();
<font color="#555555">019 </font>    setLayout(<font color="#0000AA">new</font> FlowLayout());
<font color="#555555">020 </font>    hello = <font color="#0000AA">new</font> Button(<font color="#0000FF">"Hello"</font>);
<font color="#555555">021 </font>    hello.addActionListener(<font color="#006699">this</font>);
<font color="#555555">022 </font>    add(hello);
<font color="#555555">023 </font>    world = <font color="#0000AA">new</font> Button(<font color="#0000FF">"World"</font>);
<font color="#555555">024 </font>    world.addActionListener(<font color="#006699">this</font>);
<font color="#555555">025 </font>    add(world);
<font color="#555555">026 </font>    helloClip = getAudioClip(getCodeBase(),<font color="#0000FF">"hello.au"</font>);
<font color="#555555">027 </font>    worldClip = getAudioClip(getCodeBase(),<font color="#0000FF">"world.au"</font>);
<font color="#555555">028 </font>  }
<font color="#555555">029 </font>
<font color="#555555">030 </font>  <font color="#0000AA">public</font> <font color="#006699">void</font> actionPerformed(ActionEvent event)
<font color="#555555">031 </font>  {
<font color="#555555">032 </font>    String cmd = event.getActionCommand();
<font color="#555555">033 </font>    <font color="#0000AA">if</font> (cmd.equals(<font color="#0000FF">"Hello"</font>)) {
<font color="#555555">034 </font>      helloClip.play();
<font color="#555555">035 </font>    } <font color="#0000AA">else</font> <font color="#0000AA">if</font> (cmd.equals(<font color="#0000FF">"World"</font>)) {
<font color="#555555">036 </font>      worldClip.play();
<font color="#555555">037 </font>    }
<font color="#555555">038 </font>  }
<font color="#555555">039 </font>}</pre>
</font>
</td>
<td valign=top align=right>
<a href="../examples/HWApplet.java"><font color="#000055" size=-1>HWApplet.java</font></a></td>
</tr>
</table>
<i>
Listing 40.7: Das sprechende &#187;Hello, World&#171;</i></p>
<p>
<table border=0 cellspacing=0 cellpadding=0 width=100%>
<tr>
<td width=1 align=left valign=top bgcolor="#000077"><img src="trp1_1.gif"></td>
<td><img src="trp1_1.gif" width=2></td>
<td valign=top width=1000>

<p>
Eine HTML-Datei <font color="#660099">HWApplet.html</font> zum Aufruf
dieses Applets findet sich in <a href="k100338.html#jardateieninapplets">Abschnitt 53.6.5</a>.
Sie wird dort als Beispiel f&uuml;r die Einbindung von Applets in
jar-Dateien verwendet.</td>
<td><img src="trp1_1.gif" width=2></td>
<td valign=top>
<table border=0 cellspacing=0 cellpadding=1 width=100% bgcolor="#000077">
<tr>
<td><font color="#FFFFFF">&nbsp;Hinweis&nbsp;</font></td>
</tr>
</table>
</td>
<td width=1 align=left valign=top bgcolor="#000077"><img src="trp1_1.gif"></td>
</tr>
</table>


<!-- Section -->
<a name="sectlevel3id040003002"></a>
<h3>40.3.2 Soundausgabe in Applikationen </h3>

<p>
Seit dem JDK 1.2 kann nicht nur in Applets, sondern auch in Applikationen
Sound ausgegeben werden. Dazu bietet die Klasse <a href="index_a.html#ixb100603"><font color=#000080><tt>Applet</tt></font></a>
eine statische Methode <a name="ixa102947"><a href="index_n.html#ixb102199"><font color=#000080><tt>newAudioClip</tt></font></a></a>:
<p>
<table border=0 cellspacing=0 cellpadding=0 width=100% bgcolor="#EEFFCC">
<tr>
<td valign=top width=100%>
<font color="#660066">
<pre>
public static AudioClip newAudioClip(URL url)
</pre>
</font>
</td>
</tr>
</table>

<p>
Da es sich um eine Klassenmethode handelt, kann sie auch au&szlig;erhalb
eines Applets aufgerufen werden. Das folgende Beispiel zeigt ein einfaches
Programm, das in der Kommandozeile den URL einer Sounddatei erwartet
und diese dann maximal 10 Sekunden lang abspielt: 
<a name="listingid040008"></a>

<p>
<table border=0 cellspacing=0 cellpadding=0 width=100% bgcolor="#DDDDDD">
<tr>
<td valign=top>
<font color="#000055">
<pre>
<font color="#555555">001 </font><font color="#00AA00">/* PlaySound.java */</font>
<font color="#555555">002 </font>
<font color="#555555">003 </font><font color="#0000AA">import</font> java.net.*;
<font color="#555555">004 </font><font color="#0000AA">import</font> java.applet.*;
<font color="#555555">005 </font>
<font color="#555555">006 </font><font color="#0000AA">public</font> <font color="#0000AA">class</font> PlaySound
<font color="#555555">007 </font>{
<font color="#555555">008 </font>  <font color="#0000AA">public</font> <font color="#0000AA">static</font> <font color="#006699">void</font> main(String[] args)
<font color="#555555">009 </font>  {
<font color="#555555">010 </font>    <font color="#0000AA">if</font> (args.length &gt;= 1) {
<font color="#555555">011 </font>      <font color="#0000AA">try</font> {
<font color="#555555">012 </font>        URL url = <font color="#0000AA">new</font> URL(args[0]);
<font color="#555555">013 </font>        AudioClip clip = Applet.newAudioClip(url);
<font color="#555555">014 </font>        clip.play();
<font color="#555555">015 </font>        <font color="#0000AA">try</font> {
<font color="#555555">016 </font>          Thread.sleep(10000);
<font color="#555555">017 </font>        } <font color="#0000AA">catch</font> (InterruptedException e) {
<font color="#555555">018 </font>        }
<font color="#555555">019 </font>        System.exit(0);
<font color="#555555">020 </font>      } <font color="#0000AA">catch</font> (MalformedURLException e) {
<font color="#555555">021 </font>        System.out.println(e.toString());
<font color="#555555">022 </font>      }
<font color="#555555">023 </font>    }
<font color="#555555">024 </font>  }
<font color="#555555">025 </font>}</pre>
</font>
</td>
<td valign=top align=right>
<a href="../examples/PlaySound.java"><font color="#000055" size=-1>PlaySound.java</font></a></td>
</tr>
</table>
<i>
Listing 40.8: Soundausgabe aus einer Applikation</i></p>

<p>
Das Programm kann beispielsweise dazu verwendet werden, einige der
Standard-Sounddateien unter Windows abzuspielen: 
<font color="#333300">
<pre>
java PlaySound file:///c:/windows\media\Startup.wav

java PlaySound file:///c:/windows\media\town.mid
</pre>
</font>

<p>
Hierbei werden die g&auml;ngigsten Audioformate unterst&uuml;tzt;
die Dokumentation nennt insbesondere MIDI, WAVE, RMF, AIFF und AU.
<hr>
<table border=0 cellpadding=0 cellspacing=1 width="100%">
<tr bgcolor="#EEFFCC">
<td width="7%" align=center bgcolor="#DDCC99"><a href="cover.html">&nbsp;Titel&nbsp;</a>
<td width="7%" align=center bgcolor="#DDCC99"><a href="k100003.html">&nbsp;Inhalt&nbsp;</a>
<td width="7%" align=center bgcolor="#DDCC99"><a href="search.html">&nbsp;Suchen&nbsp;</a>
<td width="7%" align=center bgcolor="#DDCC99"><a href="index.html">&nbsp;Index&nbsp;</a>
<td width="7%" align=center bgcolor="#DDCC99"><a href="../jdkdocs/index.html" onClick="this.href=getDocIndex()">&nbsp;DOC&nbsp;</a>
<td align="right">Handbuch der Java-Programmierung, 7. Auflage, Addison
Wesley, Version 7.0
<tr bgcolor="#EEFFCC">
<td width="7%" align=center bgcolor="#DDCC99"><a href="k100257.html">&nbsp;&lt;&lt;&nbsp;</a>
<td width="7%" align=center bgcolor="#DDCC99"><a href="k100259.html">&nbsp;&nbsp;&lt;&nbsp;&nbsp;</a>
<td width="7%" align=center bgcolor="#DDCC99"><a href="k100261.html">&nbsp;&nbsp;&gt;&nbsp;&nbsp;</a>
<td width="7%" align=center bgcolor="#DDCC99"><a href="k100263.html">&nbsp;&gt;&gt;&nbsp;</a>
<td width="7%" align=center bgcolor="#DDCC99"><a href="../jdkdocs/api/index.html" onClick="this.href=getApiIndex()">&nbsp;API&nbsp;</a>
<td align="right">&copy; 1998, 2011 Guido Kr&uuml;ger &amp; Heiko
Hansen, <a href="http://www.javabuch.de">http://www.javabuch.de</a>
</table>
<a name="endofbody"></a>
</body>
</html>
